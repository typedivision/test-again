#!/usr/bin/env sh

test_fail_exit () {
  exit 1
}

test_fail_return () {
  return 1
}

test_fail_trap () {
  false
  return 0
}

test_fail_expect_status_true () {
  t_expect_status true 1
}

test_fail_expect_status_false () {
  t_expect_status false 0
}

test_fail_expect_output () {
  t_expect_output 'echo "hello world"' "hell0 world"
}

test_fail_expect_output_multiline () {
  t_expect_output 'for i in hello world; do echo $i; done' "\
hell0
world"
}

test_fail_expect_value () {
  t_expect_value 1 2
}

test_fail_expect_value_char () {
  local a="x"
  t_expect_value '$a' X
}

test_fail_expect_value_number () {
  local a=0
  t_expect_value '$a' 1
}

test_multiple_expects_fail_early () {
  t_expect_status true 1
  t_expect_status true 0
}

test_multiple_expects_fail_late () {
  t_expect_status true 0
  t_expect_status true 1
}

. test-again
